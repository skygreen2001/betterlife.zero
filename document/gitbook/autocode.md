# 代码生成

****代码生成侧重于对新增功能模块、数据库表和代码的快速上手使用****

* 工具集

        路径    :tools/tools/autocode/
        核心文件名称：db_onekey.php
        该路径下其它类文件都是其组成分支实现

* 核心实现

        路径    :tools/tools/autocode/
        核心文件名称：AutoCodeModel.php
        该路径下其它类文件都是其组成分支实现

##代码生成的方法论
代码生成分为三步:
1. 检查代码生成配置文件是否存在；如果没有，先声称配置文件，配置文件存在，执行下一步。
2. 检查数据库表设计命名规范是否按规范要求，它会影响后续代码生成功能的准确性
3. 代码生成核心,从数据库生成实体类开始，直到生成表示层为止。

##代码生成的策略
代码生成核心根据项目重用的类型不同,生成代码的策略也不同。

    项目重用类型
        1.完整版【同现有版本一样】
        2.通用版【后台使用Jquery框架】
        3.高级版【后台使用Extjs框架】
        4.精简版【只包括框架核心-包括MVC,前后台】
        5.MINI版【只包括框架核心-只包括了DAO,不包括显示组件、Service层等】

    代码生成的策略具体调整配置如下:

        1.完整版、3.高级版、4.精简版是同样的代码生成策略,无需调整任何配置即可进行代码生成。

        2.通用版进行代码生成前需调整项目的配置

        路径    :config/config/

        * 文件名称：Config_AutoCode.php

        配置设置说明如下

            /**
             * Model转换成后台Admin
             *         工程重用选择类型:通用版后
             *         代码生成会转向AutoCodePreviewReportLike
             */
            const AFTER_MODEL_CONVERT_ADMIN=true;//原为false

        5.MINI版进行代码生成前需调整项目的配置

        路径    :config/config/

        * 文件名称：Config_AutoCode.php

        配置设置说明如下

            /**
             * 工程重用为MINI后,只需要生成实体类
             */
            const ONLY_DOMAIN=true;//原为false

##代码生成的流程

    代码会生成在一个默认临时文件夹:model里,生成后代码可比对生产系统同样的文件，查看文件内容的变化和差异；如果生产系统的文件尚未进行手工修改变化；可直接覆盖生产系统的文件。











