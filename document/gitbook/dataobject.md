# æ•°æ®å¯¹è±¡é€šç”¨æ–¹æ³•

## å®šä½
è·¯å¾„    :core/model/

æ–‡ä»¶åç§°ï¼šDataObject.php

githubè·¯å¾„:https://github.com/skygreen2001/betterlife/blob/master/core/model/DataObject.php

æ¯ä¸ªæ•°æ®å¯¹è±¡éƒ½ç»§æ‰¿å®ƒï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•ç›´æŽ¥æ‰§è¡Œæ•°æ®åº“çš„æ“ä½œ

##æ¦‚è¿°

æ•°æ®åº“é‡Œçš„æ¯å¼ è¡¨å¯¹åº”ä¸€ä¸ªæ•°æ®å¯¹è±¡

è¡¨åå®šä¹‰è§„åˆ™:åº“åç¼©å†™+â€œ_â€+ç›®å½•å+"_"+ç±»å[å¤´å­—æ¯å°å†™]

    å¦‚åšå®¢è¡¨åå®šä¹‰ä¸ºbb_core_blog
    é‚£ä¹ˆåšå®¢æ•°æ®å¯¹è±¡å³:Blog[å¤´å­—æ¯å¤§äº›]

æ•°æ®å¯¹è±¡å¯ä»¥ç›´æŽ¥ä½¿ç”¨ä»¥ä¸‹å®šä¹‰çš„é€šç”¨æ–¹æ³•å¿«é€Ÿè¿›è¡Œæ•°æ®åº“çš„æ“ä½œ

##å®šä¹‰é€šç”¨æ–¹æ³•åˆ—è¡¨
å®šä¹‰é€šç”¨æ–¹æ³•åˆ†ä¸ºä¸¤ç±»:å®žä¾‹æ–¹æ³•å’Œç±»æ–¹æ³•ã€‚

### å®žä¾‹æ–¹æ³•ã€éœ€å®žä¾‹åŒ–æ•°æ®å¯¹è±¡ã€‘
ä¸€èˆ¬æ¥è®²æ•°æ®å¯¹è±¡çš„å¢žåˆ æ”¹å®šä¹‰ä¸ºå®žä¾‹æ–¹æ³•

* save:ä¿å­˜æ•°æ®å¯¹è±¡
* update:æ›´æ–°æ•°æ®å¯¹è±¡
* delete:åˆ é™¤æ•°æ®å¯¹è±¡

### ç±»æ–¹æ³•ã€é™æ€æ–¹æ³•ã€‘
ä¸€èˆ¬æ¥è®²æ•°æ®å¯¹è±¡çš„æŸ¥è¯¢å®šä¹‰ä¸ºç±»æ–¹æ³•

* updateProperties:æ›´æ–°å¯¹è±¡æŒ‡å®šçš„å±žæ€§
* updateBy:æ ¹æ®æ¡ä»¶æ›´æ–°æ•°æ®å¯¹è±¡æŒ‡å®šçš„å±žæ€§
* deleteByID:ç”±æ ‡è¯†åˆ é™¤æŒ‡å®šIDæ•°æ®å¯¹è±¡
* deleteByIds:æ ¹æ®ä¸»é”®åˆ é™¤å¤šæ¡è®°å½•
* deleteBy:æ ¹æ®æ¡ä»¶åˆ é™¤å¤šæ¡è®°å½•
* increment:å¯¹å±žæ€§è¿›è¡Œé€’å¢ž
* decrement:å¯¹å±žæ€§è¿›è¡Œé€’å‡
* existByID:ç”±æ ‡è¯†åˆ¤æ–­æŒ‡å®šIDæ•°æ®å¯¹è±¡æ˜¯å¦å­˜åœ¨
* existBy:åˆ¤æ–­ç¬¦åˆæ¡ä»¶çš„æ•°æ®å¯¹è±¡æ˜¯å¦å­˜åœ¨
* select:æŸ¥è¯¢å½“å‰å¯¹è±¡éœ€æ˜¾ç¤ºå±žæ€§çš„åˆ—è¡¨
* select_one:æŸ¥è¯¢å½“å‰å¯¹è±¡å•ä¸ªéœ€æ˜¾ç¤ºçš„å±žæ€§
* get:æŸ¥è¯¢æ•°æ®å¯¹è±¡åˆ—è¡¨
* get_one:æŸ¥è¯¢å¾—åˆ°å•ä¸ªå¯¹è±¡å®žä½“
* get_by_id:æ ¹æ®è¡¨IDä¸»é”®èŽ·å–æŒ‡å®šçš„å¯¹è±¡[IDå¯¹åº”çš„è¡¨åˆ—]
* count:æ•°æ®å¯¹è±¡æ€»è®¡æ•°
* queryPage:æ•°æ®å¯¹è±¡åˆ†é¡µ
* queryPageByPageNo:æ•°æ®å¯¹è±¡åˆ†é¡µæ ¹æ®å½“å‰é¡µæ•°å’Œæ¯é¡µæ˜¾ç¤ºè®°å½•æ•°

å…¶ä»–ç±»æ–¹æ³•
* toXml:æ•°æ®å¯¹è±¡è½¬æ¢æˆxmlå­—ç¬¦ä¸²
* toJson:æ•°æ®å¯¹è±¡è½¬æ¢æˆJsonå­—ç¬¦ä¸²
* toArray:æ•°æ®å¯¹è±¡è½¬æ¢æˆæ•°ç»„
* max:èŽ·å–æ•°æ®å¯¹è±¡æŒ‡å®šå±žæ€§[è¡¨åˆ—]æœ€å¤§å€¼
* min:èŽ·å–æ•°æ®å¯¹è±¡æŒ‡å®šå±žæ€§[è¡¨åˆ—]æœ€í ½å°å€¼
* sum:èŽ·å–æ•°æ®å¯¹è±¡æŒ‡å®šå±žæ€§[è¡¨åˆ—]æ€»å’Œ
* countMultitable:å¯¹è±¡æ€»è®¡æ•°[å¤šè¡¨å…³è”æŸ¥è¯¢]
* queryPageMultitable:å¯¹è±¡åˆ†é¡µ[å¤šè¡¨å…³è”æŸ¥è¯¢]

##ä½¿ç”¨æ–¹æ³•ç¤ºä¾‹

### è°ƒç”¨å®žä¾‹æ–¹æ³•

ä»¥å®žä¾‹æ–¹æ³•:save ä¸ºä¾‹
```
$joe=new User();
$joe->setUsername("joy");
//$joe["username"]="wb";//ä¹Ÿå¯ä»¥ä½¿ç”¨phpçš„æ•°ç»„æ–¹å¼è¿›è¡Œèµ‹å€¼
$joe->setPassword("tttt");
$joe->save($joe);```

### è°ƒç”¨ç±»æ–¹æ³•

ä»¥ç±»æ–¹æ³•: queryPageä¸ºä¾‹
```
$blogs=Blog::queryPage(0,10,
	array(
		//"(blog_content like '%å…³é”®å­—%' or blog_content like '%å…¬å¼€è¯¾%')",
		"blog_id<4",
		"user_id"=>1
	)
);
print_r($blogs);```

ä»¥ç±»æ–¹æ³•: selectä¸ºä¾‹
```
$blogs=Blog::select('blog_name,blog_content');
print_r($blogs);```
